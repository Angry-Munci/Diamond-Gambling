<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diamond Slots</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(circle at center, #0b001f 0%, #000 100%);
      font-family: 'Orbitron', sans-serif;
      color: white;
      text-align: center;
      overflow: hidden;
    }

    h1 {
      font-size: 2.5em;
      color: #8f4aff;
      text-shadow: 0 0 20px #8f4aff;
    }

    #diamondDisplay {
      font-size: 1.5em;
      margin: 10px;
      color: #00eaff;
      text-shadow: 0 0 10px #00eaff;
    }

    .slot {
      display: inline-block;
      width: 100px;
      height: 100px;
      margin: 10px;
      background: black;
      border: 3px solid #8f4aff;
      border-radius: 15px;
      box-shadow: 0 0 15px #8f4aff;
      font-size: 2em;
      line-height: 100px;
      color: #00eaff;
      text-shadow: 0 0 15px #00eaff;
    }
<div id="loginBox">
  <input id="username" placeholder="Username">
  <input id="password" placeholder="Password" type="password">
  <button onclick="loginOrRegister(username.value, password.value)">Login</button>
</div>

    #spinBtn {
      padding: 15px 30px;
      font-size: 1.2em;
      border: none;
      border-radius: 10px;
      background: linear-gradient(90deg, #8f4aff, #00eaff);
      color: white;
      cursor: pointer;
      box-shadow: 0 0 20px #8f4aff;
      transition: 0.3s;
    }

    #spinBtn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 40px #00eaff;
    }

    .powerups button {
      margin: 10px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #1e0037;
      color: white;
      text-shadow: 0 0 10px #00eaff;
      box-shadow: 0 0 10px #8f4aff;
      transition: 0.3s;
    }

    .powerups button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #00eaff;
    }

    #leaderboard {
      margin-top: 30px;
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 15px;
      width: 300px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 0 15px #8f4aff;
    }

    .jackpot {
      font-size: 3em;
      color: gold;
      animation: jackpotAnim 1s infinite alternate;
      text-shadow: 0 0 25px gold, 0 0 50px orange;
    }

    @keyframes jackpotAnim {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.2); opacity: 0.8; }
    }
  </style>
</head>
<body>
  <h1>ğŸ’ Diamond Slots ğŸ’</h1>

  <div>
    <input type="text" id="username" placeholder="Enter your name" style="padding:8px; border-radius:6px;">
    <button onclick="saveUsername()">Save</button>
  </div>

  <div id="diamondDisplay"></div>

  <div id="slots">
    <div class="slot" id="slot1">â”</div>
    <div class="slot" id="slot2">â”</div>
    <div class="slot" id="slot3">â”</div>
  </div>

  <br>
  <button id="spinBtn">ğŸ° SPIN</button>

  <div class="powerups">
    <button id="luckBtn">ğŸ’« 2Ã— Luck (1000ğŸ’)</button>
    <button id="rewardBtn">ğŸ’ 2Ã— Reward (2000ğŸ’)</button>
    <button id="freeSpinBtn">ğŸŸ Free Spin (1500ğŸ’)</button>
  </div>

  <h2 id="result"></h2>

  <div id="leaderboard">
    <h3>ğŸ† Leaderboard</h3>
    <ol id="leaderboardList"></ol>
  </div>

  <audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-slot-machine-loop-2067.mp3"></audio>
  <audio id="jackpotSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  // ğŸ”¹ 1. Connect to your Supabase project
  const SUPABASE_URL = "https://qknwaibcivwzmdwdjluq.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFrbndhaWJjaXZ3em1kd2RqbHVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3Mzk5MTUsImV4cCI6MjA3NzMxNTkxNX0.L-vGz-UnxCCwjRG2kXbp7A-n96EviJYFpgDLOhQr57Y";
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  // ğŸ”¹ 2. Player session data
  let currentPlayer = null;
  let diamonds = 0;

  // ğŸ”¹ 3. Login / Signup Function
  async function loginOrRegister(username, password) {
    // Try to find player
    let { data } = await supabase
      .from("players")
      .select("*")
      .eq("username", username)
      .eq("password", password)
      .single();

    if (!data) {
      // If not found, register a new one
      await supabase.from("players").insert([{ username, password, diamonds: 1000 }]);
      diamonds = 1000;
      alert("New player registered! Starting with 1000 diamonds.");
    } else {
      diamonds = data.diamonds;
      alert(`Welcome back ${username}! You have ${diamonds} diamonds.`);
    }

    currentPlayer = username;
    updateDisplay();
  }

  // ğŸ”¹ 4. Update Diamonds in Supabase
  async function saveDiamonds() {
    if (!currentPlayer) return;
    await supabase
      .from("players")
      .update({ diamonds })
      .eq("username", currentPlayer);
  }

  // ğŸ”¹ 5. Show Leaderboard
  async function showLeaderboard() {
    const { data } = await supabase
      .from("players")
      .select("username, diamonds")
      .order("diamonds", { ascending: false });

    let html = "<h3>ğŸ† Leaderboard</h3>";
    data.forEach((p, i) => {
      html += `<p>${i + 1}. ${p.username} â€” ğŸ’ ${p.diamonds}</p>`;
    });
    document.getElementById("leaderboard").innerHTML = html;
  }
</script>

  <script>
    let diamonds = 1000;
    let luckMultiplier = 1;
    let rewardMultiplier = 1;
    let freeSpin = false;
    let username = localStorage.getItem('username') || '';

    const symbols = ["ğŸ’", "ğŸ’", "ğŸ‹", "ğŸ””", "7ï¸âƒ£", "â­", "ğŸ”¥"];
    const diamondDisplay = document.getElementById("diamondDisplay");
    const resultDisplay = document.getElementById("result");
    const spinSound = document.getElementById("spinSound");
    const jackpotSound = document.getElementById("jackpotSound");

    function saveUsername() {
      username = document.getElementById('username').value.trim();
      if (!username) return alert("Enter a username!");
      localStorage.setItem('username', username);
      loadData();
    }

    function loadData() {
      const leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '{}');
      if (leaderboard[username]) diamonds = leaderboard[username];
      updateDisplay();
      updateLeaderboard();
    }

    function updateDisplay() {
      diamondDisplay.textContent = `ğŸ’ Diamonds: ${diamonds}`;
      const leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '{}');
      leaderboard[username] = diamonds;
      localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
      updateLeaderboard();
    }

    function updateLeaderboard() {
      const leaderboardList = document.getElementById("leaderboardList");
      const leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '{}');
      const sorted = Object.entries(leaderboard).sort((a,b) => b[1] - a[1]);
      leaderboardList.innerHTML = sorted.map(([name, score]) => `<li>${name}: ${score} ğŸ’</li>`).join('');
    }

    function spin() {
      if (!username) return alert("Enter your username first!");
      if (diamonds <= 0 && !freeSpin) {
        resultDisplay.textContent = "âŒ Out of diamonds!";
        return;
      }

      if (!freeSpin) diamonds -= 50;
      freeSpin = false;

      spinSound.play();

      const s1 = symbols[Math.floor(Math.random() * symbols.length)];
      const s2 = symbols[Math.floor(Math.random() * symbols.length)];
      const s3 = symbols[Math.floor(Math.random() * symbols.length)];

      document.getElementById("slot1").textContent = s1;
      document.getElementById("slot2").textContent = s2;
      document.getElementById("slot3").textContent = s3;

      if (s1 === s2 && s2 === s3) {
        let reward = 500 * rewardMultiplier;
        if (Math.random() < 0.1 * luckMultiplier) {
          reward *= 5;
          jackpotSound.play();
          resultDisplay.innerHTML = `<span class='jackpot'>ğŸ‰ JACKPOT! +${reward} ğŸ’</span>`;
        } else {
          resultDisplay.textContent = `ğŸ‰ You won +${reward} ğŸ’!`;
        }
        diamonds += reward;
      } else {
        resultDisplay.textContent = "ğŸ˜¢ Try again!";
      }

      updateDisplay();
    }

    document.getElementById("spinBtn").onclick = spin;
    document.getElementById("luckBtn").onclick = () => { if (diamonds >= 1000) { diamonds -= 1000; luckMultiplier = 2; setTimeout(()=>luckMultiplier=1,15000); updateDisplay(); resultDisplay.textContent = "ğŸ’« Luck boost active!"; } };
    document.getElementById("rewardBtn").onclick = () => { if (diamonds >= 2000) { diamonds -= 2000; rewardMultiplier = 2; setTimeout(()=>rewardMultiplier=1,15000); updateDisplay(); resultDisplay.textContent = "ğŸ’ Double rewards active!"; } };
    document.getElementById("freeSpinBtn").onclick = () => { if (diamonds >= 1500) { diamonds -= 1500; freeSpin = true; updateDisplay(); resultDisplay.textContent = "ğŸŸ Free spin ready!"; } };

    if (username) loadData();
  </script>
saveDiamonds();
showLeaderboard();

</body>
<div id="leaderboard"></div>

</html>
